import { TheoryTopic } from '@/types/theory';

export const phpTheory: TheoryTopic = {
  topicId: 'php',
  topicName: 'PHP',
  category: 'Languages',
  description: 'PHP server-side scripting language for web development',
  sections: [
    {
      id: 'basics',
      title: 'PHP Basics',
      content: '',
      subsections: [
        { id: 'q1', title: 'What is PHP?', content: 'PHP (Hypertext Preprocessor) is a server-side scripting language designed for web development. Created by Rasmus Lerdorf in 1994. Embedded in HTML with <?php ?> tags. Powers WordPress, Facebook (HHVM), Wikipedia. Easy to learn, widely supported by hosting providers. Current version: PHP 8.x with major improvements.' },
        { id: 'q2', title: 'What are PHP data types?', content: 'PHP data types: Scalar (string, int, float, bool), Compound (array, object, callable, iterable), Special (NULL, resource). PHP is loosely typed. Use gettype() to check type. Type declarations added in PHP 7. Type juggling: automatic type conversion. Strict types: declare(strict_types=1);' },
        { id: 'q3', title: 'What are variables in PHP?', content: 'Variables start with $ sign: $name = "John"; Case-sensitive. No type declaration required (dynamic typing). Naming: letters, numbers, underscores, start with letter/underscore. Variable variables: $$var. Global variables with global keyword or $GLOBALS array. Superglobals: $_GET, $_POST, $_SESSION, etc.' },
        { id: 'q4', title: 'What are operators in PHP?', content: 'PHP operators: Arithmetic (+, -, *, /, %, **), Assignment (=, +=, .=), Comparison (==, ===, !=, !==, <=>), Logical (&&, ||, !, and, or, xor), String (. concatenation), Array (+, ==, ===), Null coalescing (??), Spaceship (<=>). === checks type and value.' },
        { id: 'q5', title: 'What is the difference between == and ===?', content: '== (equal): compares values with type juggling. "5" == 5 is true. === (identical): compares value and type. "5" === 5 is false. Use === for precise comparison to avoid unexpected results. Same for != vs !==. Common source of bugs: 0 == "hello" is true with ==.' },
        { id: 'q6', title: 'What are control structures in PHP?', content: 'Conditional: if, elseif, else, switch, match (PHP 8). Loops: for, foreach, while, do-while. Jump: break, continue, return. Alternative syntax: if(): endif; foreach(): endforeach; Used in templates. match expression returns value, requires exhaustive cases.' },
        { id: 'q7', title: 'What is the difference between echo and print?', content: 'echo: outputs strings, no return value, slightly faster, can take multiple arguments (echo "a", "b"). print: outputs string, returns 1, single argument only. Both are language constructs (not functions). Use echo for output, print when return value needed (rare). Parentheses optional.' },
        { id: 'q8', title: 'What are functions in PHP?', content: 'Functions defined with function keyword: function name($params) { return $value; }. Support default values, type hints, return types. Anonymous functions (closures): $fn = function($x) { return $x * 2; }; Arrow functions (PHP 7.4): $fn = fn($x) => $x * 2. Functions are case-insensitive.' },
        { id: 'q9', title: 'What are include and require?', content: 'Include files with include or require. include: warning if file missing, continues. require: fatal error if file missing, stops. include_once/require_once: include only if not already included. Use require for essential files. Common for headers, configs, functions. Path can be relative or absolute.' },
        { id: 'q10', title: 'What are superglobal variables?', content: 'Superglobals are built-in arrays accessible everywhere. $_GET (URL parameters), $_POST (form data), $_REQUEST (GET, POST, COOKIE), $_SESSION (session data), $_COOKIE (cookies), $_FILES (uploads), $_SERVER (server info), $_ENV (environment), $GLOBALS (all globals). Always validate/sanitize user input.' }
      ]
    },
    {
      id: 'arrays',
      title: 'Arrays and Strings',
      content: '',
      subsections: [
        { id: 'q11', title: 'What are arrays in PHP?', content: 'PHP arrays are ordered maps (key-value pairs). Indexed array: $arr = [1, 2, 3]; Associative: $arr = ["name" => "John"]; Mixed keys allowed. Created with [] or array(). Access: $arr[0], $arr["key"]. count() for length. Arrays are dynamic, can grow/shrink. Negative indices not supported directly.' },
        { id: 'q12', title: 'What is the difference between indexed and associative arrays?', content: 'Indexed arrays use numeric keys (0, 1, 2...). Associative arrays use string keys. PHP arrays can mix both. $indexed = ["a", "b", "c"]; $assoc = ["name" => "John", "age" => 30]; Access same way: $arr[0] or $arr["name"]. Internally all PHP arrays are associative.' },
        { id: 'q13', title: 'What are common array functions?', content: 'Array functions: count() length, array_push()/array_pop() end, array_shift()/array_unshift() start, array_merge() combine, array_keys()/array_values(), in_array() search, array_search() find key, sort()/rsort(), array_map()/array_filter()/array_reduce(), array_slice()/array_splice().' },
        { id: 'q14', title: 'How does foreach work?', content: 'foreach iterates arrays: foreach($arr as $value) or foreach($arr as $key => $value). Modifying value doesn\'t affect array unless using reference: foreach($arr as &$value). unset($value) after loop to break reference. Can iterate objects. Most common way to loop arrays.' },
        { id: 'q15', title: 'What are string functions in PHP?', content: 'String functions: strlen() length, strtolower()/strtoupper() case, trim()/ltrim()/rtrim() whitespace, substr() extract, strpos()/strrpos() find, str_replace() replace, explode()/implode() split/join, sprintf() format, htmlspecialchars() escape HTML, preg_match() regex.' },
        { id: 'q16', title: 'What is string interpolation?', content: 'String interpolation embeds variables in double-quoted strings: "Hello $name" or "Hello {$name}". Single quotes are literal: \'Hello $name\' outputs $name. Complex expressions need curly braces: "{$arr[0]}". Heredoc (<<<EOF) and Nowdoc (<<<\'EOF\') for multiline. Use curly braces for clarity.' },
        { id: 'q17', title: 'What is the difference between single and double quotes?', content: 'Double quotes: parse variables and escape sequences (\\n, \\t, etc.). Single quotes: literal strings, only \\\\ and \\\' parsed. Double quotes slightly slower due to parsing. "Hello $name" vs \'Hello \' . $name. Use single when no interpolation needed. Heredoc like double, Nowdoc like single.' },
        { id: 'q18', title: 'What is array destructuring?', content: 'Array destructuring extracts values: list($a, $b) = [1, 2]; or [$a, $b] = [1, 2]; (PHP 7.1+). Skip elements: [, $second] = $arr; Associative: ["name" => $name] = $person; Works in foreach: foreach($users as ["id" => $id, "name" => $name]). Cleaner than multiple assignments.' },
        { id: 'q19', title: 'What is the spread operator?', content: 'Spread operator (...) unpacks arrays. In function calls: func(...$args). In array literals (PHP 7.4): $merged = [...$arr1, ...$arr2]. Variadic functions: function sum(...$nums). Works with iterables. Useful for merging, passing dynamic arguments. Similar to JavaScript spread.' },
        { id: 'q20', title: 'What are multidimensional arrays?', content: 'Multidimensional arrays contain arrays. $matrix = [[1,2], [3,4]]; Access: $matrix[0][1] (gets 2). Associative: $users = [["name" => "John"], ["name" => "Jane"]]; Common for database results. Loop with nested foreach. Use recursive functions for arbitrary depth.' }
      ]
    },
    {
      id: 'oop',
      title: 'Object-Oriented PHP',
      content: '',
      subsections: [
        { id: 'q21', title: 'What is OOP in PHP?', content: 'PHP supports object-oriented programming since PHP 5. Classes define properties (attributes) and methods (functions). Objects are instances of classes. OOP concepts: encapsulation, inheritance, polymorphism, abstraction. PHP 8 adds constructor promotion, named arguments, attributes. Modern PHP is primarily OOP.' },
        { id: 'q22', title: 'How to define a class in PHP?', content: 'Class syntax: class ClassName { public $property; public function method() {} }. Instantiate: $obj = new ClassName(); Access: $obj->property, $obj->method(). Constructor: __construct(). Destructor: __destruct(). $this refers to current instance. Constants: const NAME = "value";' },
        { id: 'q23', title: 'What are access modifiers?', content: 'Access modifiers control visibility: public (accessible everywhere), private (class only), protected (class and subclasses). Default is public. Apply to properties and methods. Properties should typically be private with getters/setters. Constants are implicitly public (can specify in PHP 7.1+).' },
        { id: 'q24', title: 'What is inheritance in PHP?', content: 'Inheritance: class Child extends Parent. Child inherits properties and methods. Override by redefining. parent:: calls parent method. final prevents overriding or extending. PHP supports single inheritance only. Use interfaces and traits for multiple inheritance-like behavior. Constructor not automatically called.' },
        { id: 'q25', title: 'What are interfaces in PHP?', content: 'Interfaces define method signatures without implementation. interface Name { public function method(); }. Classes implement: class MyClass implements Interface1, Interface2. All methods must be implemented. Interfaces can extend other interfaces. Use for contracts and polymorphism. Cannot have properties (except constants).' },
        { id: 'q26', title: 'What are abstract classes?', content: 'Abstract classes cannot be instantiated. abstract class Name { abstract public function method(); }. Can have abstract methods (no body) and concrete methods. Subclasses must implement abstract methods. Use for shared base functionality. Difference from interface: can have implementations and properties.' },
        { id: 'q27', title: 'What are traits in PHP?', content: 'Traits are reusable code blocks: trait Name { public function method() {} }. Use in class: class MyClass { use Trait1, Trait2; }. Solves single inheritance limitation. Can conflict (resolve with insteadof). Traits can use other traits. Properties and methods included in using class. Not instantiable.' },
        { id: 'q28', title: 'What are magic methods?', content: 'Magic methods have special names starting with __. __construct() constructor, __destruct() destructor, __get()/__set() property access, __call() method access, __toString() string conversion, __invoke() object as function, __clone() cloning, __sleep()/__wakeup() serialization.' },
        { id: 'q29', title: 'What is static keyword in PHP?', content: 'static members belong to class, not instances. static $count; static function method(). Access with ClassName::$property, self::method() inside class, static::method() for late static binding. Cannot access $this in static methods. Use for counters, utilities, singletons. self:: uses defining class, static:: uses calling class.' },
        { id: 'q30', title: 'What is namespacing in PHP?', content: 'Namespaces organize code and prevent naming conflicts. namespace App\\Models; at file start. Use: use App\\Models\\User; or full path \\App\\Models\\User. Autoloading with Composer (PSR-4). Sub-namespaces with \\. Global namespace with leading \\. use function, use const for functions/constants.' }
      ]
    },
    {
      id: 'web',
      title: 'Web Development',
      content: '',
      subsections: [
        { id: 'q31', title: 'How to handle form data in PHP?', content: '$_GET for URL parameters (?name=value), $_POST for form data (method="post"). $_REQUEST contains both. Always validate and sanitize: filter_input(), htmlspecialchars(), filter_var(). Check isset() before accessing. CSRF protection with tokens. Use prepared statements for database queries.' },
        { id: 'q32', title: 'What are sessions in PHP?', content: 'Sessions maintain state across requests. session_start() at beginning. Store: $_SESSION["key"] = "value". Access same way. session_destroy() to end. session_id() gets/sets ID. Session stored on server (files by default). Cookie holds session ID. Configure in php.ini. Use for authentication.' },
        { id: 'q33', title: 'What are cookies in PHP?', content: 'Cookies store data in browser. setcookie("name", "value", expire, path, domain, secure, httponly). Read with $_COOKIE["name"]. Set before output. Delete: set expiration in past. Cookies sent with every request. Limited size (~4KB). Use httponly for security. Secure flag for HTTPS only.' },
        { id: 'q34', title: 'What is the difference between session and cookie?', content: 'Sessions: stored on server, more secure, any size, expire on browser close (configurable). Cookies: stored in browser, less secure, limited size, persist after close. Sessions use cookies to store ID. Use sessions for sensitive data (auth), cookies for preferences. Sessions use more server resources.' },
        { id: 'q35', title: 'How to handle file uploads?', content: '$_FILES contains upload info: name, tmp_name, size, type, error. move_uploaded_file($tmp, $dest) moves file. Validate: check error code, size, type (MIME), extension. Use unique names to prevent overwrite. Set upload_max_filesize and post_max_size in php.ini. Security: never trust user input.' },
        { id: 'q36', title: 'What is PDO in PHP?', content: 'PDO (PHP Data Objects) is database abstraction layer. Supports multiple databases (MySQL, PostgreSQL, SQLite, etc.). Prepared statements prevent SQL injection. Usage: $pdo = new PDO($dsn, $user, $pass); $stmt = $pdo->prepare($sql); $stmt->execute($params); Exception-based error handling. Preferred over mysqli.' },
        { id: 'q37', title: 'What are prepared statements?', content: 'Prepared statements separate SQL and data, preventing injection. $stmt = $pdo->prepare("SELECT * FROM users WHERE id = ?"); $stmt->execute([$id]); Or named: prepare("... WHERE id = :id"); execute(["id" => $id]); Query parsed once, executed many times. Essential for security.' },
        { id: 'q38', title: 'How to prevent SQL injection?', content: 'SQL injection inserts malicious SQL. Prevent with: prepared statements (primary defense), input validation, escaping (less reliable). Never concatenate user input into queries. Use parameterized queries with PDO or mysqli. Validate expected data types. Principle of least privilege for database user.' },
        { id: 'q39', title: 'What is XSS and how to prevent it?', content: 'XSS (Cross-Site Scripting) injects malicious scripts. Prevent: htmlspecialchars() when outputting user data, Content-Security-Policy header, HTTPOnly cookies. Never trust user input. Encode output for context (HTML, JS, URL). Use templating engines with auto-escaping. Validate and sanitize input.' },
        { id: 'q40', title: 'What is CSRF and how to prevent it?', content: 'CSRF (Cross-Site Request Forgery) tricks user into unwanted actions. Prevent: CSRF tokens in forms (random, verify on submit), SameSite cookie attribute, check Referer header. Token: generate on form display, verify on submission. Frameworks handle this automatically. Use POST for state-changing actions.' }
      ]
    },
    {
      id: 'advanced',
      title: 'Advanced PHP',
      content: '',
      subsections: [
        { id: 'q41', title: 'What is Composer?', content: 'Composer is PHP dependency manager. composer.json defines dependencies. composer install downloads packages. composer require adds package. Autoloading: require "vendor/autoload.php". Packagist is main repository. composer.lock locks versions. Modern PHP projects use Composer. Similar to npm for JavaScript.' },
        { id: 'q42', title: 'What is PSR in PHP?', content: 'PSR (PHP Standard Recommendations) by PHP-FIG. PSR-1: Basic Coding Standard. PSR-4: Autoloading. PSR-12: Extended Coding Style. PSR-7: HTTP Message Interface. Following PSRs improves interoperability. Frameworks and libraries follow PSRs. Use tools like PHP-CS-Fixer to enforce.' },
        { id: 'q43', title: 'What are PHP 8 features?', content: 'PHP 8 features: JIT compiler, union types (int|string), named arguments (fn(name: "John")), attributes (#[Route("/")]), match expression, nullsafe operator (?->), constructor promotion, static return type, throw expression, str_contains(), WeakMap. Major performance improvements.' },
        { id: 'q44', title: 'What is type hinting in PHP?', content: 'Type hints specify parameter and return types. function add(int $a, int $b): int. Types: int, float, string, bool, array, object, callable, iterable, mixed (PHP 8). Nullable: ?int or int|null. Union types (PHP 8): int|string. Enable strict: declare(strict_types=1). Catches type errors early.' },
        { id: 'q45', title: 'What are anonymous classes?', content: 'Anonymous classes are defined inline without name. new class { method() {} }. Useful for one-time implementations, testing, simple objects. Can extend classes, implement interfaces. Access outer variables with constructor. Rarely used but useful in specific scenarios. PHP 7+.' },
        { id: 'q46', title: 'What is error handling in PHP?', content: 'Errors: notices (minor), warnings (non-fatal), fatal errors (stop execution). try-catch for exceptions. set_error_handler() for errors. set_exception_handler() for uncaught exceptions. ErrorException converts errors to exceptions. error_reporting() sets level. In production: log errors, don\'t display.' },
        { id: 'q47', title: 'What is autoloading in PHP?', content: 'Autoloading loads classes automatically when used. spl_autoload_register(function($class) { include $class . ".php"; }). Composer provides PSR-4 autoloading. Define in composer.json: "autoload": {"psr-4": {"App\\\\": "src/"}}. Run composer dump-autoload. Eliminates manual includes.' },
        { id: 'q48', title: 'What are generators in PHP?', content: 'Generators create iterators efficiently using yield. function range($start, $end) { for($i=$start; $i<=$end; $i++) yield $i; }. Memory efficient for large datasets. Lazy evaluation. Can yield key => value. yield from delegates. Use for big files, database results, infinite sequences.' },
        { id: 'q49', title: 'What is reflection in PHP?', content: 'Reflection API inspects classes, methods, properties at runtime. ReflectionClass, ReflectionMethod, ReflectionProperty. Get methods: (new ReflectionClass("MyClass"))->getMethods(). Used by frameworks, ORMs, testing. Can access private members. Useful for documentation generators. Performance overhead, use judiciously.' },
        { id: 'q50', title: 'What are popular PHP frameworks?', content: 'Laravel: full-featured, Eloquent ORM, Blade templates, popular. Symfony: enterprise, reusable components, Doctrine ORM. CodeIgniter: lightweight, simple. Yii: fast, secure. CakePHP: convention over configuration. Slim: micro-framework for APIs. Choose based on project needs and team experience.' }
      ]
    }
  ]
};
